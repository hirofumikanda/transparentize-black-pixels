# 地図タイルの黒色ピクセルを透明化するスクリプト

このスクリプトは、`tiles/{z}/{x}/{y}.png` ディレクトリ内に格納された地図タイル（XYZ形式）に対し、RGBが `(0, 0, 0)` のピクセルを完全に透明（アルファ値 0）に変換します。処理後の画像は、元のファイルに上書き保存されます。

## 目的

Web地図上でXYZ地図タイルを重ね合わせる際、背景に黒い領域（RGBが0,0,0）があると、見た目が不自然になることがあります。本スクリプトはこれらの黒いピクセルを透明化することで、より自然な表示を実現することを目的としています。

## 動作環境

- Python 3.7 以上
- Pillow ライブラリ（画像処理用）

### インストール方法

以下のコマンドで Pillow をインストールしてください：

```bash
pip3 install pillow
````

## 使用方法

以下のコマンドでスクリプトを実行します：

```bash
python3 transparentize_black_pixels.py
```

スクリプトは `tiles/` 以下のすべての PNG ファイルを再帰的に処理し、RGB が `(0, 0, 0)` のピクセルを透明に変換します。

### ディレクトリ構成の例

```
project/
├── transparentize_black_pixels.py
└── tiles/
    └── 15/
        └── 29000/
            └── 13000.png
```

## 注意事項

* **処理対象の画像ファイルは上書き保存されます。** 必要に応じて、事前にバックアップを作成してください。
* RGBが `(0, 0, 0)` に**完全一致**するピクセルのみが透明化されます。類似した黒（例：`(1,1,1)`）は対象外です。
* PNG形式以外のファイルは処理対象外です。
* 読み取り不可能なファイルがある場合は、スキップしてエラーを表示します。

## ライセンス

MIT License
